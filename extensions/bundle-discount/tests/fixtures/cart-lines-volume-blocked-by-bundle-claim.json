{
  "payload": {
    "target": "cart.lines.discounts.generate.run",
    "export": "cart-lines-discounts-generate-run",
    "input": {
      "cart": {
        "lines": [
          {
            "id": "gid://shopify/CartLine/1",
            "quantity": 5,
            "cost": {
              "subtotalAmount": {
                "amount": "100.0"
              }
            },
            "merchandise": {
              "__typename": "ProductVariant",
              "id": "gid://shopify/ProductVariant/100",
              "product": {
                "id": "gid://shopify/Product/1",
                "handle": "product-a"
              }
            }
          },
          {
            "id": "gid://shopify/CartLine/2",
            "quantity": 1,
            "cost": {
              "subtotalAmount": {
                "amount": "20.0"
              }
            },
            "merchandise": {
              "__typename": "ProductVariant",
              "id": "gid://shopify/ProductVariant/200",
              "product": {
                "id": "gid://shopify/Product/2",
                "handle": "product-b"
              }
            }
          }
        ]
      },
      "shop": {
        "localTime": {
          "date": "2026-02-26"
        }
      },
      "discount": {
        "discountClasses": [
          "ORDER",
          "PRODUCT"
        ],
        "metafield": {
          "value": "[{\"id\":\"bundle-fbt\",\"title\":\"A + B 20%\",\"type\":\"FBT\",\"discountType\":\"PERCENTAGE\",\"discountValue\":20,\"items\":[{\"productId\":\"gid://shopify/Product/1\",\"requiredQuantity\":1},{\"productId\":\"gid://shopify/Product/2\",\"requiredQuantity\":1}]},{\"id\":\"bundle-volume-a\",\"title\":\"15% Off 5 A\",\"type\":\"VOLUME\",\"discountType\":\"PERCENTAGE\",\"discountValue\":15,\"targetQuantity\":5,\"items\":[{\"productId\":\"gid://shopify/Product/1\",\"requiredQuantity\":1}]}]"
        }
      }
    },
    "output": {
      "operations": [
        {
          "productDiscountsAdd": {
            "candidates": [
              {
                "message": "A + B 20%",
                "value": {
                  "percentage": {
                    "value": 20
                  }
                },
                "targets": [
                  {
                    "cartLine": {
                      "id": "gid://shopify/CartLine/1",
                      "quantity": 1
                    }
                  },
                  {
                    "cartLine": {
                      "id": "gid://shopify/CartLine/2",
                      "quantity": 1
                    }
                  }
                ]
              }
            ],
            "selectionStrategy": "ALL"
          }
        }
      ]
    }
  }
}
